#include "common.h"
#include "game_server.h"
#include "fen.h"

int main() {
    puts("~== ENGINE CHESS ==~");

    GameServer server;
    if (!game_server_init_from_fen(&server, FEN_STARTING)) {
        fprintf(stderr, "[error]: failed to initialize the game server\n");
        return EXIT_FAILURE;
    }

    server.uci_in = stdin;
    server.uci_out = stdout;

    game_server_setup_uci(&server);
    while (game_server_update(&server) && !server.is_done);

    fprintf(stderr, "[info] game finished\n");

    game_server_deinit(&server);

    return 0;
}
