#include "common.h"
#include "game_server.h"
#include "fen.h"

void puts_flush(const char* s) {
    puts(s);
    fflush(stdout);
}

int main() {
    puts_flush("~== ENGINE CHESS ==~");

    GameServer server;
    if (!game_server_init_from_fen(&server, FEN_STARTING)) {
        fprintf(stderr, "[error]: failed to initialize the game server\n");
        return EXIT_FAILURE;
    }

    game_server_setup_uci(&server);
    while (game_server_update(&server) && !server.is_done);

    fprintf(stderr, "[info] game finished\n");

    return 0;
}
