#pragma once

#include "common.h"
#include "uci.h"

typedef struct {
    MoveHistory history[HISTORY_MAX];
    PieceColor ai_color;
    Game game;
    bool is_startpos;
    bool is_done;
    FILE* uci_in;
    FILE* uci_out;
    char* uci_linebuf;
    size_t uci_linebuf_cap;
} GameServer;

bool game_server_init_from_fen(GameServer* server, const char* fen);

void game_server_deinit(GameServer* server);

bool game_server_setup_uci(GameServer* server);

bool game_server_update(GameServer* server);
