#include "common.h"

Square* board_index(Position position, Board* board) {
    if (position.rank < '1' || position.rank > '8' || position.file < 'a' || position.file > 'h')
        return NULL;
    return &board->squares[position.rank - '1'][position.file - 'a'];
}

void swap_squares(Square* a, Square* b) {
    Square tmp = *a;
    *a = *b;
    *b = tmp;
}

PieceColor opposite(PieceColor color) {
    return color == COLOR_WHITE ? COLOR_BLACK : COLOR_WHITE;
}

char piece_letter(Piece piece) {
    char c = piece.kind;
    if (piece.color == COLOR_WHITE)
        c -= 32; // to upper case
    return c;
}

bool piece_from_letter(char letter, Piece* piece) {
    bool is_upper = letter >= 'A' && letter <= 'Z';
    if (is_upper) letter += 32; // to lower case
    piece->color = is_upper ? COLOR_WHITE : COLOR_BLACK;
    ASSERT(strchr(piece_kinds, letter));
    piece->kind = letter;
    return true;
}
